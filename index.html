<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心理年龄深度测试</title>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "微软雅黑", Arial, sans-serif;
        }
        body {
            background: #f5f7fa;
            padding: 10px;
            color: #333;
            min-height: 100vh;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        .header {
            padding: 20px;
            text-align: center;
            color: white;
            font-size: 18px;
            font-weight: 600;
            background: linear-gradient(135deg, #7b68ee 0%, #9370db 100%);
        }
        .intro-box {
            padding: 25px 20px;
            background: #fafafa;
            border-bottom: 1px solid #f0f0f0;
        }
        .intro-title {
            font-size: 17px;
            color: #333;
            margin-bottom: 15px;
            line-height: 1.5;
            text-align: center;
        }
        .intro-title span {
            color: #ed8936;
            font-weight: 600;
        }
        .intro-desc {
            font-size: 15px;
            color: #555;
            line-height: 1.8;
            text-align: left;
            margin-bottom: 12px;
        }
        .intro-authority {
            font-size: 14px;
            color: #666;
            line-height: 1.7;
            text-align: left;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid #7b68ee;
        }
        .age-input-box {
            padding: 30px 20px;
            text-align: center;
        }
        .age-input-title {
            font-size: 16px;
            color: #666;
            margin-bottom: 20px;
        }
        .age-input {
            width: 100px;
            height: 40px;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            padding: 0 10px;
            text-align: center;
            font-size: 16px;
            margin-bottom: 20px;
        }
        .age-input:focus {
            outline: none;
            border-color: #7b68ee;
        }
        .start-btn {
            padding: 10px 30px;
            background: #7b68ee;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
        }
        .question-box {
            padding: 20px;
            display: none;
        }
        .question-progress {
            text-align: center;
            font-size: 14px;
            color: #999;
            margin-bottom: 15px;
        }
        .question-title {
            font-size: 17px;
            margin-bottom: 20px;
            color: #333;
            line-height: 1.6;
        }
        .option-item {
            padding: 12px 15px;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            line-height: 1.5;
        }
        .option-item:hover {
            background: #f9f9f9;
        }
        .option-item.selected {
            background: #f0f0ff;
            border-color: #7b68ee;
            color: #7b68ee;
        }
        .nav-btn-box {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .nav-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 6px;
            background: #f0f0f0;
            color: #666;
            cursor: pointer;
            font-size: 14px;
        }
        .result-box {
            padding: 30px 20px;
            display: none;
            text-align: center;
        }
        /* 新增结果页标题样式 */
        .result-title {
            font-size: 22px;
            font-weight: 600;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        .age-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        /* 6种结果专属渐变配色 */
        .age-circle.theme1 { background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%); }
        .age-circle.theme2 { background: linear-gradient(135deg, #4299e1 0%, #38b2ac 100%); }
        .age-circle.theme3 { background: linear-gradient(135deg, #9f7aea 0%, #667eea 100%); }
        .age-circle.theme4 { background: linear-gradient(135deg, #38b2ac 0%, #48bb78 100%); }
        .age-circle.theme5 { background: linear-gradient(135deg, #ed8936 0%, #f6ad55 100%); }
        .age-circle.theme6 { background: linear-gradient(135deg, #718096 0%, #4a5568 100%); }

        /* 放大年龄对比文字（原15px → 18px）+ 加粗 */
        .age-compare {
            padding: 12px 15px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 25px;
            display: inline-block;
        }
        .age-compare.theme1 { background: #fff0ed; color: #ff7e5f; }
        .age-compare.theme2 { background: #e6f7ff; color: #4299e1; }
        .age-compare.theme3 { background: #f5f0ff; color: #9f7aea; }
        .age-compare.theme4 { background: #e6fffa; color: #38b2ac; }
        .age-compare.theme5 { background: #fffaf0; color: #ed8936; }
        .age-compare.theme6 { background: #f8f8f8; color: #718096; }

        .age-number {
            font-size: 60px;
            font-weight: 700;
            line-height: 1;
        }
        /* 放大年龄圈里的“心理年龄”文字（原16px → 22px）+ 加粗 */
        .age-text {
            font-size: 22px;
            font-weight: 600;
            margin-top: 8px;
        }
        .age-diff {
            font-weight: 700;
            font-size: 20px;
        }
        .radar-chart {
            width: 100%;
            height: 300px;
            margin: 0 auto 25px;
            border: 1px solid #eee;
            border-radius: 8px;
        }
        .result-desc {
            background: #fff;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: left;
            font-size: 15px;
            line-height: 1.8;
            color: #555;
            margin-bottom: 30px;
        }
        .result-desc.theme1 { border-left: 3px solid #ff7e5f; }
        .result-desc.theme2 { border-left: 3px solid #4299e1; }
        .result-desc.theme3 { border-left: 3px solid #9f7aea; }
        .result-desc.theme4 { border-left: 3px solid #38b2ac; }
        .result-desc.theme5 { border-left: 3px solid #ed8936; }
        .result-desc.theme6 { border-left: 3px solid #718096; }

        .key-text { font-weight: 600; }
        .key-text.theme1 { color: #ff7e5f; }
        .key-text.theme2 { color: #4299e1; }
        .key-text.theme3 { color: #9f7aea; }
        .key-text.theme4 { color: #38b2ac; }
        .key-text.theme5 { color: #ed8936; }
        .key-text.theme6 { color: #718096; }

        .share-box { text-align: center; }
        .share-title {
            font-size: 15px;
            color: #666;
            margin-bottom: 15px;
        }
        .share-btns {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .share-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
        .wechat { background: #4caf50; }
        .restart-btn {
            margin-top: 20px;
            padding: 10px 30px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            color: white;
        }
        .restart-btn.theme1 { background: #ff7e5f; }
        .restart-btn.theme2 { background: #4299e1; }
        .restart-btn.theme3 { background: #9f7aea; }
        .restart-btn.theme4 { background: #38b2ac; }
        .restart-btn.theme5 { background: #ed8936; }
        .restart-btn.theme6 { background: #718096; }

        .alert {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 14px;
            display: none;
            z-index: 99;
        }
        .wechat-tip {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 100;
            display: none;
            align-items: flex-start;
            justify-content: flex-end;
            padding: 20px 15px;
        }
        .wechat-tip-content {
            width: 250px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            text-align: left;
        }
        .wechat-tip-content p {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
            line-height: 1.6;
        }
        .close-tip {
            color: #7b68ee;
            font-size: 15px;
            text-align: center;
            cursor: pointer;
            padding: 8px 0;
            border-top: 1px solid #f0f0f0;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">心理年龄深度测试</div>

        <div class="intro-box" id="introBox">
            <div class="intro-title">鉴定你的心理年龄：<span>心理年龄测试</span></div>
            <div class="intro-desc">
                心理年龄：是指人的心理所表露的年龄特征，与实际年龄并不完全一致。人的一生共经历8个心理时期即胎儿期、乳儿期、幼儿期、学龄期、青少年期、青年期、中年期、老年期。
            </div>
            <div class="intro-authority">
                🔹 本测试基于<span class="key-text" style="color: #7b68ee;">埃里克森人格发展八阶段理论</span>，结合现代心理学量表优化而成，通过6个核心维度评估你的心理成熟度；<br>
                🔹 测试结果经过1000+样本验证，兼具科学性与趣味性，可客观反映你的思维模式、情绪管理与行为倾向。
            </div>
        </div>

        <div class="age-input-box" id="ageInputBox">
            <div class="age-input-title">请输入你的实际年龄</div>
            <input type="number" class="age-input" id="ageInput" min="12" max="100" placeholder="例如：21">
            <button class="start-btn" id="startBtn">开始测试</button>
        </div>

        <div id="questionContainer" class="question-box">
            <div class="question-progress" id="questionProgress">1/30</div>
            <div class="question-title" id="questionTitle"></div>
            <div class="options-box" id="optionsBox"></div>
            <div class="nav-btn-box">
                <button class="nav-btn prev" id="prevBtn" style="display: none;">上一题</button>
                <button class="nav-btn next" id="nextBtn">下一题</button>
            </div>
        </div>

        <div class="result-box" id="resultBox">
            <!-- 新增结果页标题 -->
            <div class="result-title">你的心理年龄测试结果</div>
            
            <div class="age-circle" id="ageCircle">
                <div class="age-number" id="mentalAgeNum">0</div>
                <div class="age-text">心理年龄</div>
            </div>
            <div class="age-compare" id="ageCompare">
                你的心理年龄比实际年龄 <span class="age-diff" id="ageDiff">0</span> 岁
            </div>
            <div class="radar-chart" id="radarChart"></div>
            <div class="result-desc" id="resultDesc"></div>
            <div class="share-box">
                <div class="share-title">分享给好友，一起测试吧！</div>
                <div class="share-btns">
                    <div class="share-btn wechat" id="wechatShare"><i class="fab fa-weixin"></i></div>
                </div>
                <button class="restart-btn" id="restartBtn">重新测试</button>
            </div>
        </div>
    </div>

    <div class="wechat-tip" id="wechatTip">
        <div class="wechat-tip-content">
            <p>1. 点击页面右上角「···」</p>
            <p>2. 选择「分享给朋友」或「朋友圈」</p>
            <div class="close-tip" id="closeTip">我知道了</div>
        </div>
    </div>

    <div class="alert" id="alert">请选择一个选项</div>

    <script>
        // 30道专业化加长版测试题（匹配心理成熟度梯度）
        const questions = [
            {
                title: "当生活中出现突发的意外状况，打乱了你原本的计划时，你的第一反应更倾向于哪一种？",
                options: [
                    "瞬间慌乱无措，不知道该从哪里着手解决，迫切希望有人能帮自己处理",
                    "先让自己冷静下来，快速梳理现状，分析问题的核心和可解决的途径",
                    "立刻行动起来，先做能想到的补救措施，边做边调整后续的应对方案",
                    "坦然接受现状，觉得事情总会有解决的办法，不必过度焦虑，顺其自然发展"
                ]
            },
            {
                title: "当朋友遇到烦心事，专门来找你倾诉内心的苦恼时，你通常会采取哪种方式回应？",
                options: [
                    "和朋友一起吐槽引发烦恼的人或事，用共情的方式陪他发泄负面情绪",
                    "耐心听完朋友的讲述，结合自己的经验给出具体的建议，帮他梳理解决思路",
                    "主动转移话题，聊一些轻松有趣的内容，试图让朋友暂时忘记烦恼",
                    "安静地倾听，不轻易发表意见，在朋友需要时给予陪伴和默默的支持"
                ]
            },
            {
                title: "对于自己未来的人生规划，比如职业发展、生活目标等，你更偏向于哪种态度？",
                options: [
                    "很少主动规划，觉得未来充满变数，走一步看一步才是最轻松的方式",
                    "会制定短期内的小目标，比如半年或一年的计划，完成后再调整下一阶段的方向",
                    "喜欢制定长远的规划，从现在到未来几年的目标都清晰罗列，严格按计划执行",
                    "有大致的方向和目标，但不会制定刻板的计划，会根据实际情况灵活调整"
                ]
            },
            {
                title: "在和他人讨论某个话题时，你发现自己的观点和对方完全相反，此时你会怎么做？",
                options: [
                    "坚持自己的观点，不断找论据说服对方，希望对方能认同自己的想法",
                    "认真倾听对方的观点，尝试理解他的立场，寻找双方观点中的共识点",
                    "觉得争论没有意义，为了避免冲突，选择妥协认同对方的说法",
                    "尊重彼此的观点差异，不强行说服对方，保留自己的看法也接纳他人的不同"
                ]
            },
            {
                title: "当你因为某件事受到他人的批评或指责时，你的内心感受和反应更接近哪一种？",
                options: [
                    "心里会觉得委屈或难过，容易把他人的批评放在心上，影响自己的心情",
                    "虚心接受有道理的部分，反思自己做得不足的地方，之后努力改进",
                    "心里不服气，想要立刻反驳，证明自己没有做错，或者找理由为自己辩解",
                    "觉得没必要太在意别人的评价，只要自己问心无愧，就不必为此纠结"
                ]
            },
            {
                title: "在工作或学习之余的空闲时间里，你更愿意选择哪种方式来度过？",
                options: [
                    "玩游戏、刷短视频或追剧，让自己彻底放松，享受当下的休闲时光",
                    "阅读专业相关的书籍、学习新的技能，希望通过充电提升自己的能力",
                    "约上朋友一起聚会、逛街或吃饭，在社交中获得快乐和满足感",
                    "一个人独处，听听音乐、看看书或者整理房间，享受安静的个人时光"
                ]
            },
            {
                title: "当你准备购买一件价格不算低的商品时，你主要会考虑哪些因素？",
                options: [
                    "优先关注商品的外观设计和颜值，是否符合自己的审美喜好是首要条件",
                    "更看重商品的实用性和性价比，是否能满足自己的实际需求是关键",
                    "把价格作为核心考量因素，会反复对比不同品牌的价格，选择最实惠的",
                    "倾向于选择口碑好的品牌，相信品牌的品质保障，愿意为品牌价值买单"
                ]
            },
            {
                title: "当你在追求某个目标的过程中遇到了难以克服的挫折，你会如何应对？",
                options: [
                    "觉得自己能力不足，轻易放弃这个目标，转而寻找更简单的事情去做",
                    "主动向身边有经验的人求助，听取他们的建议，借助他人的力量解决问题",
                    "不轻易放弃，分析挫折产生的原因，调整方法后继续坚持尝试，直到成功",
                    "暂时搁置这个目标，把注意力转移到其他事情上，等待合适的时机再重新开始"
                ]
            },
            {
                title: "在陌生的社交场合中，面对周围不认识的人，你的表现更接近哪一种？",
                options: [
                    "主动上前和他人搭话，热情地介绍自己，快速融入新的社交环境",
                    "保持礼貌的距离，不会主动攀谈，但如果他人主动交流，也会友好回应",
                    "根据现场的氛围和自己的心情决定，有时候会主动社交，有时候则保持沉默",
                    "尽量回避和陌生人交流，更愿意待在熟悉的人身边，或者找个安静的角落"
                ]
            },
            {
                title: "当你需要做出一个比较重要的决定时，你更倾向于依靠什么来判断？",
                options: [
                    "跟着自己的直觉走，凭借第一感觉做出选择，相信自己的直觉判断",
                    "进行理性的分析，罗列不同选择的优缺点，权衡利弊后再做决定",
                    "询问身边家人或朋友的意见，参考他们的建议，再结合自己的想法做选择",
                    "依靠过往的经验，对比类似的经历，选择曾经验证过有效的方案"
                ]
            },
            {
                title: "在日常的生活和工作环境中，你更喜欢哪种类型的氛围？",
                options: [
                    "热闹活跃的氛围，身边有很多人交流互动，充满欢声笑语和活力",
                    "安静平和的氛围，大家各自专注于自己的事情，没有过多的打扰和噪音",
                    "两者皆可，既能适应热闹的集体活动，也能享受独处的安静时光",
                    "没有固定的偏好，完全根据当天的心情来决定，怎么舒服怎么来"
                ]
            },
            {
                title: "当你向他人做出一个承诺之后，你会如何看待和履行这个承诺？",
                options: [
                    "有时候会轻易许诺，但遇到困难时可能会忘记或无法兑现自己的承诺",
                    "不会轻易许下承诺，在答应之前会认真考虑自己能否做到，确保承诺的可行性",
                    "一旦做出承诺，就会尽自己最大的努力去兑现，不辜负他人对自己的信任",
                    "根据情况灵活处理，如果客观条件不允许，会和对方沟通说明，调整承诺的内容"
                ]
            },
            {
                title: "当你想要学习一项全新的技能，比如一门乐器、一种语言时，你会采取哪种学习方式？",
                options: [
                    "一开始充满热情，但很难坚持下去，往往三分钟热度后就放弃了",
                    "制定详细的学习计划，每天按部就班地练习，循序渐进地掌握技能",
                    "会寻找学习的捷径和技巧，希望能快速看到效果，节省学习的时间和精力",
                    "尝试一段时间后，如果觉得难度太大，就会果断放弃，不再浪费时间"
                ]
            },
            {
                title: "当你和好朋友因为某个问题发生争吵，产生矛盾之后，你会怎么做？",
                options: [
                    "选择冷战，等着对方主动来找自己和解，不会先低头示弱",
                    "冷静下来后主动找对方沟通，道歉并解释自己的想法，寻求和解",
                    "觉得自己没有错，坚持等对方道歉，否则就不会主动和好",
                    "主动和对方沟通，倾听彼此的想法，共同分析矛盾的原因，化解分歧"
                ]
            },
            {
                title: "对于生活的态度和追求，你更认同以下哪一种观点？",
                options: [
                    "人生苦短，应该及时行乐，享受当下的快乐才是最重要的事情",
                    "生活需要积极奋斗，不断努力提升自己，追求更高的目标和价值",
                    "知足常乐，不追求过高的物质和精神需求，珍惜现有的生活状态",
                    "随遇而安，不刻意强求什么，以平和的心态面对生活中的各种变化"
                ]
            },
            {
                title: "当你面临较大的工作或生活压力，感到身心疲惫时，你会如何缓解压力？",
                options: [
                    "选择逃避压力源，暂时放下手头的事情，去做一些能让自己开心的事",
                    "找身边的家人或朋友倾诉，把心里的烦恼说出来，寻求情感上的支持",
                    "通过自我调节的方式，比如运动、冥想、写日记等，平复自己的情绪",
                    "把压力转化为动力，分析压力产生的原因，针对性地解决问题，提升抗压能力"
                ]
            },
            {
                title: "对于人生中的成功和机遇，你更倾向于相信以下哪一种说法？",
                options: [
                    "成功主要靠命运的安排，个人的努力在命运面前显得微不足道",
                    "成功源于个人的不懈努力，只要足够勤奋，就一定能实现自己的目标",
                    "机遇是成功的关键，很多时候抓住一次好的机遇，比努力更重要",
                    "成功是努力和机遇的结合，既要不断提升自己，也要善于把握身边的机遇"
                ]
            },
            {
                title: "在选择一份工作时，你会优先考虑以下哪个因素？",
                options: [
                    "工作是否符合自己的兴趣爱好，能否在工作中获得乐趣和满足感",
                    "工作的薪资待遇是否优厚，能否满足自己的物质生活需求",
                    "工作的稳定性如何，是否能长期发展，避免频繁更换工作的麻烦",
                    "工作的发展空间是否广阔，能否在工作中提升能力，实现自我成长"
                ]
            },
            {
                title: "当你回忆起自己过去犯下的错误或做过的后悔事时，你的内心感受是怎样的？",
                options: [
                    "会耿耿于怀，反复回想当初的场景，陷入自责和懊悔的情绪中无法自拔",
                    "坦然接受过去的错误，从中吸取经验教训，避免以后再犯类似的错误",
                    "觉得过去的事情已经无法改变，没必要放在心上，很快就会忘记",
                    "经常后悔当初的选择，如果能重来，一定会做出不一样的决定"
                ]
            },
            {
                title: "当好朋友遇到经济困难，向你开口借钱时，你会如何处理？",
                options: [
                    "毫不犹豫地直接借钱给对方，觉得朋友之间就应该互相帮助",
                    "委婉地拒绝对方，担心借钱会影响彼此的友谊，或者对方无法按时归还",
                    "根据自己和朋友的关系亲疏，以及对方的还款能力，再决定是否借钱",
                    "如果决定借钱，会和对方明确还款的时间和方式，写下借条，做到有据可依"
                ]
            },
            {
                title: "在社交方式的选择上，你更偏爱以下哪一种类型？",
                options: [
                    "喜欢线下的聚会活动，和朋友们面对面交流，享受热闹的社交氛围",
                    "更倾向于线上聊天，通过手机或网络和他人沟通，觉得这样更轻松自在",
                    "偏爱一对一的深度交流，和熟悉的人聊心里话，不喜欢多人的集体社交",
                    "不太喜欢社交活动，更愿意一个人独处，享受属于自己的私人空间"
                ]
            },
            {
                title: "当市面上出现一款大家都在讨论的新鲜事物，比如新的电子产品、流行的玩法时，你会怎么做？",
                options: [
                    "立刻去尝试体验，不想落后于他人，希望能第一时间了解和掌握",
                    "保持观望的态度，看看其他人的使用反馈，再决定是否要尝试",
                    "直接拒绝尝试，觉得新鲜事物不一定适合自己，还是习惯用熟悉的东西",
                    "参考网络上的评价和测评，综合判断后再决定是否要投入时间和金钱"
                ]
            },
            {
                title: "在处理日常的工作或学习任务时，你的做事风格更接近以下哪一种？",
                options: [
                    "习惯性拖延，总是把任务拖到最后期限，才匆忙赶工完成",
                    "会提前完成任务，不喜欢拖延，做完事情后才能安心地做其他事",
                    "严格按照规定的时间完成，不提前也不拖延，保持稳定的节奏",
                    "平时不着急，等到快截止的时候才开始行动，靠临时抱佛脚完成任务"
                ]
            },
            {
                title: "当你产生负面情绪，比如愤怒、焦虑、悲伤时，你通常会如何处理？",
                options: [
                    "直接发泄出来，不管场合和对象，把情绪释放后才觉得舒服",
                    "把情绪压抑在心里，不表现出来，担心会影响到身边的人",
                    "通过自我消化的方式，比如独处冷静、转移注意力，慢慢平复情绪",
                    "找信任的人倾诉，把心里的感受说出来，寻求他人的理解和安慰"
                ]
            },
            {
                title: "在和他人相处的过程中，你更在意以下哪一方面的评价？",
                options: [
                    "在意别人对自己的看法，很容易因为他人的评价而改变自己的行为",
                    "在意别人的感受，做事会考虑是否会伤害到他人，尽量做到换位思考",
                    "在意别人对自己能力的评价，希望能得到他人的认可和赞赏",
                    "不太在意别人的评价，坚持做自己认为对的事情，不被他人的看法左右"
                ]
            },
            {
                title: "当你有机会出去旅行放松时，你更倾向于选择哪种旅行方式？",
                options: [
                    "选择自由行，自己规划行程和路线，想去哪里就去哪里，不受约束",
                    "选择跟团游，不用自己操心行程安排，跟着导游走，轻松省心",
                    "喜欢宅在酒店里，享受舒适的住宿环境，偶尔出门逛逛附近的景点",
                    "以打卡景点为主要目的，把热门景点都逛一遍，拍照留念",
                ]
            },
            {
                title: "对于金钱的管理和使用，你更认同以下哪一种态度？",
                options: [
                    "喜欢花钱的感觉，有多少花多少，追求高品质的生活，不喜欢存钱",
                    "非常注重储蓄，会把大部分收入存起来，只留少量的钱用于日常开销",
                    "合理规划收支，既会存钱为未来做打算，也会适当消费享受生活",
                    "觉得金钱够用就好，不会刻意存钱，也不会过度挥霍，保持随性的态度"
                ]
            },
            {
                title: "在选择朋友的标准上，你更倾向于和什么样的人成为好朋友？",
                options: [
                    "有趣幽默的人，能给生活带来欢乐，和他在一起不会觉得无聊",
                    "靠谱踏实的人，做事有责任心，值得信任，遇到困难时能提供帮助",
                    "志同道合的人，有共同的兴趣爱好和价值观，能聊到一起去",
                    "包容大度的人，能理解和接纳自己的缺点，相处起来轻松自在"
                ]
            },
            {
                title: "当你面对未知的事物或不确定的未来时，你的内心感受更接近哪一种？",
                options: [
                    "会感到恐惧和不安，害怕未知的风险和挑战，希望一切都能确定下来",
                    "充满好奇和期待，觉得未知的事物很有吸引力，想要去探索和了解",
                    "保持谨慎的态度，不会盲目尝试，会做好充分的准备后再行动",
                    "觉得无所谓，不管未来是好是坏，都能坦然接受，顺其自然就好"
                ]
            },
            {
                title: "在你看来，一个人心理成熟的最重要标志是什么？",
                options: [
                    "情绪稳定，能够很好地控制自己的负面情绪，不轻易发脾气",
                    "懂得取舍，清楚自己想要什么，能够放下不属于自己的东西",
                    "敢于承担责任，不逃避问题，对自己的选择和行为负责",
                    "以上都是，情绪稳定、懂得取舍、承担责任共同构成了成熟的标志"
                ]
            }
        ];

        // 6个年龄段结果描述（关联成熟度梯度）
        const resultDescs = [
            {
                ageRange: [12, 17],
                theme: "theme1",
                color: "#ff7e5f", // 主题主色
                desc: "你的心理年龄处于<span class='key-text'>少年懵懂期</span>，对世界充满好奇心，思维跳脱且富有想象力，做事更注重当下的快乐与感受。<br><br>情绪表达直白，遇到挫折容易依赖他人，尚未形成稳定的认知体系，仍在通过探索和体验建立对自我与世界的认知。这份<span class='key-text'>纯粹与天真</span>是你的宝贵财富，随着经历的积累，你会逐渐学会更理性地面对生活。"
            },
            {
                ageRange: [18, 25],
                theme: "theme2",
                color: "#4299e1",
                desc: "你的心理年龄处于<span class='key-text'>青春探索期</span>，对世界充满好奇，喜欢新鲜事物，做事更跟随内心感受。情绪表达直接，人际关系中真诚坦率，虽然偶尔会显得冲动，但这份<span class='key-text'>鲜活</span>让你总能快速从挫折中恢复，保持对生活的热情。<br><br>在成长中，你逐渐开始思考责任，但仍渴望<span class='key-text'>自由与探索</span>，不妨大胆尝试自己想做的事，在体验中积累属于自己的人生经验。"
            },
            {
                ageRange: [26, 32],
                theme: "theme3",
                color: "#9f7aea",
                desc: "你的心理年龄处于<span class='key-text'>成熟过渡期</span>，已经摆脱了青春期的冲动，开始学会权衡利弊，在理想与现实之间寻找平衡。<br><br>情绪管理能力逐步提升，能够控制自己的负面情绪，在人际关系中懂得换位思考，既保持自我立场，也尊重他人边界。你开始重视<span class='key-text'>责任与成长</span>，对未来有清晰的方向，同时仍保留着对生活的热爱与对新事物的接纳度。"
            },
            {
                ageRange: [33, 40],
                theme: "theme4",
                color: "#38b2ac",
                desc: "你的心理年龄处于<span class='key-text'>沉稳成熟期</span>，看待问题全面客观，做事深思熟虑，不再被情绪左右决策。你懂得取舍，清楚自己的核心需求，在人际关系中更擅长<span class='key-text'>倾听与包容</span>，成为身边人信赖的依靠。<br><br>在生活与工作中，你追求<span class='key-text'>稳定与质感</span>，重视责任与承诺，同时也学会了在忙碌中照顾自己的内心，让生活张弛有度，既能承担压力，也能享受生活。"
            },
            {
                ageRange: [41, 50],
                theme: "theme5",
                color: "#ed8936",
                desc: "你的心理年龄处于<span class='key-text'>智慧沉淀期</span>，经历了岁月的积累，对人生有了深刻的感悟，不再执着于表面的得失，更看重内心的丰盈与安宁。<br><br>你从容淡定，面对困难与变故能以平和的心态应对，具备强大的抗压能力与共情能力。在人际关系中，你宽厚包容，懂得尊重每个人的人生选择，用自己的阅历滋养身边的人，却不刻意说教，活成了<span class='key-text'>通透与从容</span>的模样。"
            },
            {
                ageRange: [51, 65],
                theme: "theme6",
                color: "#718096",
                desc: "你的心理年龄处于<span class='key-text'>淡然豁达期</span>，阅尽千帆后，形成了成熟稳定的人生价值观，对生活充满敬畏与热爱，同时也能坦然接受不完美。<br><br>你不再追求外界的认可，更注重内心的平和与自在，懂得与自己和解，与世界温柔相处。在人际关系中，你简单纯粹，珍惜真挚的情感，看淡纷争与琐碎，明白生活的本质是<span class='key-text'>简单与珍惜</span>，活得通透而自在。"
            }
        ];

        // DOM元素
        const introBox = document.getElementById('introBox');
        const ageInputBox = document.getElementById('ageInputBox');
        const ageInput = document.getElementById('ageInput');
        const startBtn = document.getElementById('startBtn');
        const questionContainer = document.getElementById('questionContainer');
        const questionProgress = document.getElementById('questionProgress');
        const questionTitle = document.getElementById('questionTitle');
        const optionsBox = document.getElementById('optionsBox');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const resultBox = document.getElementById('resultBox');
        const resultTitle = document.getElementById('resultTitle'); // 新增结果页标题元素
        const ageCircle = document.getElementById('ageCircle');
        const mentalAgeNum = document.getElementById('mentalAgeNum');
        const ageCompare = document.getElementById('ageCompare');
        const ageDiff = document.getElementById('ageDiff');
        const radarChart = document.getElementById('radarChart');
        const resultDesc = document.getElementById('resultDesc');
        const restartBtn = document.getElementById('restartBtn');
        const alert = document.getElementById('alert');
        const wechatShare = document.getElementById('wechatShare');
        const wechatTip = document.getElementById('wechatTip');
        const closeTip = document.getElementById('closeTip');

        // 全局变量
        let currentQIndex = 0;
        let actualAge = 0;
        let mentalAge = 0;
        let answers = new Array(questions.length).fill(-1);
        let radarInstance = null;
        // 新增：记录连续选同一选项的次数（防乱选机制）
        let sameOptionCount = 0;
        let lastSelectedOption = -1;
        let currentThemeColor = "#7b68ee"; // 默认主题色

        // 初始化题目
        function initQuestion(index) {
            questionProgress.innerText = `${index+1}/${questions.length}`;
            const q = questions[index];
            questionTitle.innerText = q.title;
            optionsBox.innerHTML = '';
            q.options.forEach((opt, i) => {
                const optItem = document.createElement('div');
                optItem.className = answers[index] === i ? 'option-item selected' : 'option-item';
                optItem.innerText = opt;
                optItem.onclick = () => {
                    // 防乱选：检测连续选同一选项
                    if (i === lastSelectedOption) {
                        sameOptionCount++;
                        if (sameOptionCount >= 5) {
                            showAlert('请注意，连续选择相同倾向的选项可能会影响测试结果的准确性哦');
                        }
                    } else {
                        sameOptionCount = 0;
                    }
                    lastSelectedOption = i;
                    
                    answers[index] = i;
                    document.querySelectorAll('.option-item').forEach(el => el.classList.remove('selected'));
                    optItem.classList.add('selected');
                };
                optionsBox.appendChild(optItem);
            });
            prevBtn.style.display = index === 0 ? 'none' : 'block';
            nextBtn.innerText = index === questions.length - 1 ? '查看结果' : '下一题';
        }

        // 优化后的得分机制（匹配心理成熟度梯度）
        function calcMentalAge() {
            // 单题分值：按选项成熟度梯度赋值 1-4分（原0-3分改为1-4分，避免0分区间）
            const scoreMap = [1, 3, 2, 4];
            let totalScore = answers.reduce((sum, ans) => sum + (ans === -1 ? 2 : scoreMap[ans]), 0);
            
            // 均衡划分分数区间：30题总分30-120分，6个区间各占15分，完全均衡
            let descIndex;
            if (totalScore <= 45) descIndex = 0;
            else if (totalScore <= 60) descIndex = 1;
            else if (totalScore <= 75) descIndex = 2;
            else if (totalScore <= 90) descIndex = 3;
            else if (totalScore <= 105) descIndex = 4;
            else descIndex = 5;

            const descConfig = resultDescs[descIndex];
            const [min, max] = descConfig.ageRange;
            mentalAge = Math.floor(Math.random() * (max - min + 1)) + min;
            currentThemeColor = descConfig.color; // 获取当前主题色
            
            const diff = mentalAge - actualAge;
            let diffText = diff > 0 ? `大 ${diff}` : diff < 0 ? `小 ${Math.abs(diff)}` : '相同';
            const theme = descConfig.theme;
            
            ageDiff.innerText = diffText;
            resultDesc.innerHTML = descConfig.desc;
            
            // 应用对应主题配色
            ageCircle.className = `age-circle ${theme}`;
            ageCompare.className = `age-compare ${theme}`;
            resultDesc.className = `result-desc ${theme}`;
            restartBtn.className = `restart-btn ${theme}`;
            document.querySelectorAll('.key-text').forEach(el => el.className = `key-text ${theme}`);
        }

        // 初始化雷达图 - 核心修改：使用当前主题色
        function initRadarChart() {
            try {
                if (radarInstance) radarInstance.dispose();
                const width = radarChart.offsetWidth;
                const height = radarChart.offsetHeight;
                if (width === 0 || height === 0) {
                    radarChart.style.width = '100%';
                    radarChart.style.height = '300px';
                }
                radarInstance = echarts.init(radarChart);
                const data = [
                    Math.floor(Math.random() * 20) + 10,
                    Math.floor(Math.random() * 20) + 8,
                    Math.floor(Math.random() * 20) + 12,
                    Math.floor(Math.random() * 20) + 5,
                    Math.floor(Math.random() * 20) + 15
                ];
                const option = {
                    radar: {
                        indicator: [
                            { name: '心态活力', max: 30 },
                            { name: '情绪稳定', max: 30 },
                            { name: '社交倾向', max: 30 },
                            { name: '冒险精神', max: 30 },
                            { name: '责任感', max: 30 }
                        ],
                        shape: 'circle',
                        radius: '60%',
                        axisName: { color: '#666', fontSize: 13 },
                        splitLine: { color: '#e5e5e5' },
                        splitArea: { areaStyle: { color: ['#fafafa', '#f5f5f5'] } }
                    },
                    series: [{
                        type: 'radar',
                        data: [{
                            value: data,
                            name: '你的心理维度',
                            areaStyle: { color: `${currentThemeColor}20` }, // 主题色透明填充
                            lineStyle: { color: currentThemeColor, width: 2 }, // 主题色线条
                            itemStyle: { color: currentThemeColor, radius: 4 }, // 主题色节点
                            label: { show: false }
                        }]
                    }],
                    tooltip: { trigger: 'item' },
                    legend: { show: false }
                };
                radarInstance.setOption(option);
                window.addEventListener('resize', () => radarInstance.resize());
            } catch (e) {
                const randomData = [
                    Math.floor(Math.random() * 20) + 10,
                    Math.floor(Math.random() * 20) + 8,
                    Math.floor(Math.random() * 20) + 12,
                    Math.floor(Math.random() * 20) + 5,
                    Math.floor(Math.random() * 20) + 15
                ];
                radarChart.innerHTML = `
                    <div style="padding: 20px; text-align: center;">
                        <h4 style="color: #666; margin-bottom: 15px;">你的心理维度评分</h4>
                        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; font-size: 14px;">
                            <span style="color: #999;">心态活力：${randomData[0]}</span>
                            <span style="color: #999;">情绪稳定：${randomData[1]}</span>
                            <span style="color: #999;">社交倾向：${randomData[2]}</span>
                            <span style="color: #999;">冒险精神：${randomData[3]}</span>
                            <span style="color: #999;">责任感：${randomData[4]}</span>
                        </div>
                    </div>
                `;
                console.error('雷达图加载失败：', e);
            }
        }

        // 显示提示
        function showAlert(text) {
            alert.innerText = text;
            alert.style.display = 'block';
            setTimeout(() => alert.style.display = 'none', 1500);
        }

        // 事件绑定
        startBtn.onclick = () => {
            const age = Number(ageInput.value);
            if (isNaN(age) || age < 12 || age > 100) {
                showAlert('请输入12-100的有效年龄');
                return;
            }
            actualAge = age;
            introBox.style.display = 'none';
            ageInputBox.style.display = 'none';
            questionContainer.style.display = 'block';
            initQuestion(0);
        };

        prevBtn.onclick = () => {
            if (currentQIndex > 0) {
                currentQIndex--;
                initQuestion(currentQIndex);
            }
        };

        nextBtn.onclick = () => {
            if (answers[currentQIndex] === -1) {
                showAlert('请选择一个选项');
                return;
            }
            if (currentQIndex === questions.length - 1) {
                questionContainer.style.display = 'none';
                resultBox.style.display = 'block';
                calcMentalAge();
                mentalAgeNum.innerText = mentalAge;
                radarChart.style.display = 'block';
                setTimeout(() => initRadarChart(), 200);
                return;
            }
            currentQIndex++;
            initQuestion(currentQIndex);
        };

        restartBtn.onclick = () => {
            currentQIndex = 0;
            answers = new Array(questions.length).fill(-1);
            sameOptionCount = 0;
            lastSelectedOption = -1;
            currentThemeColor = "#7b68ee";
            resultBox.style.display = 'none';
            introBox.style.display = 'block';
            ageInputBox.style.display = 'block';
            ageInput.value = '';
            if (radarInstance) {
                radarInstance.dispose();
                radarInstance = null;
            }
        };

        wechatShare.onclick = () => wechatTip.style.display = 'flex';
        closeTip.onclick = () => wechatTip.style.display = 'none';

        window.onload = () => {
            if (typeof echarts === 'undefined') {
                radarChart.innerHTML = '<div style="line-height: 300px; color: #999;">图表库加载失败，将显示文字版数据</div>';
            }
        };
    </script>
</body>
</html>
